<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>P치gina Principal</title>
  <link rel="stylesheet" href="css/estilos.css">
</head>

<body>
  <div class="card">
    <h1 class="titulo">Bienvenido a la Plataforma</h1>
    <p id="nombreUsuario" style="font-weight: bold; margin-bottom: 20px;">Cargando...</p>

    <div class="form">
      <button class="btn-primario" onclick="irA('api.html')">Ir a P치gina API</button>
      <button class="btn-primario" onclick="irA('formulario.html')">Ir a Formulario</button>
      <button class="btn-primario" onclick="irA('operaciones.html')">Ir a Operaciones</button>
      <button class="btn-primario rojo" onclick="cerrarSesion()">Cerrar Sesi칩n</button>
    </div>

    <hr style="margin: 25px 0; border: 1px solid #ddd;">

    <div style="text-align:left">
      <p><b>P치gina API:</b> Interact칰a con tres APIs (correo, im치genes y frases motivacionales).</p>
      <p><b>P치gina Formulario:</b> Env칤a datos reales mediante EmailJS.</p>
      <p><b>P치gina Operaciones:</b> Realiza c치lculos interactivos con JavaScript.</p>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const usuario = sessionStorage.getItem('usuario_logueado');
      const nombreGuardado = sessionStorage.getItem('nombre_usuario');
      const nombreDiv = document.getElementById('nombreUsuario');

      // Si no hay usuario logueado, volver al login
      if (!usuario) {
        alert("Debes iniciar sesi칩n primero.");
        window.location.href = 'index.html';
        return;
      }

      // Mostrar el nombre guardado o pedirlo solo una vez
      let nombre = nombreGuardado;
      if (!nombre || nombre.trim() === "") {
        nombre = prompt('쮺u치l es tu nombre?');
        if (!nombre || nombre.trim() === "") nombre = usuario;
        sessionStorage.setItem('nombre_usuario', nombre);
      }

      nombreDiv.textContent = `Hola, ${nombre}! 游녦`;

      // Funciones globales
      window.irA = (pagina) => window.location.href = pagina;
      window.cerrarSesion = () => {
        sessionStorage.clear();
        window.location.href = 'index.html';
      };
    });
  </script>
</body>
</html>
